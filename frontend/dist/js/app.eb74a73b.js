(function(e){function t(t){for(var r,c,i=t[0],l=t[1],s=t[2],d=0,p=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/nft-viewer/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0455":function(e,t,n){"use strict";n("8db5")},"05e3":function(e,t,n){"use strict";n("d3cc")},1:function(e,t){},10:function(e,t){},11:function(e,t){},1138:function(e,t,n){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},25:function(e,t){},2523:function(e,t,n){},26:function(e,t){},27:function(e,t){},28:function(e,t){},29:function(e,t){},3:function(e,t){},30:function(e,t){},"32ad":function(e,t,n){},4:function(e,t){},"42a5":function(e,t,n){},5:function(e,t){},"5e6d":function(e,t,n){"use strict";n("42a5")},6:function(e,t){},7:function(e,t){},"75bb":function(e,t,n){},"76b3":function(e,t,n){"use strict";n("f0c8")},7753:function(e,t,n){"use strict";n("32ad")},8:function(e,t){},"8db5":function(e,t,n){},9:function(e,t){},9575:function(e,t,n){"use strict";n("1138")},c938:function(e,t,n){"use strict";n("75bb")},ca1b:function(e,t,n){"use strict";n("2523")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={id:"app"};function o(e,t,n,o,c,i){var l=Object(r["resolveComponent"])("router-view");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a,[Object(r["createVNode"])(l)])}var c=Object(r["defineComponent"])({name:"App"}),i=(n("7753"),n("6b0d")),l=n.n(i);const s=l()(c,[["render",o]]);var u=s,d=n("6c02"),p=(n("99af"),function(e){return Object(r["pushScopeId"])("data-v-8498177e"),e=e(),Object(r["popScopeId"])(),e}),m={class:"p-d-flex p-ai-center p-px-3"},v=p((function(){return Object(r["createElementVNode"])("h2",null,"Wallet",-1)})),f=p((function(){return Object(r["createElementVNode"])("div",{style:{"flex-grow":"1"}},null,-1)})),b={class:"p-d-flex p-jc-around"},y={key:0,class:"p-mt-4"};function _(e,t,n,a,o,c){var i,l,s=Object(r["resolveComponent"])("qr-scan"),u=Object(r["resolveComponent"])("Button"),d=Object(r["resolveComponent"])("Chip"),p=Object(r["resolveComponent"])("Card"),_=Object(r["resolveComponent"])("DisplayController");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[e.store.getters.camera_scan_mode?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,account_id:null===(i=e.account)||void 0===i?void 0:i.id},null,8,["account_id"])):Object(r["createCommentVNode"])("",!0),Object(r["withDirectives"])(Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(p,{class:"controller-card",style:{"margin-top":"20px"}},{header:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",m,[v,f,e.web3_modal&&e.signature&&e.account?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:1,class:"p-button-text",icon:"pi pi-check",label:"Connected"})):(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,label:"Connect",icon:e.loading_account?"pi pi-spin pi-spinner":"pi pi-wifi",onClick:e.connectAccount},null,8,["icon","onClick"]))])]})),content:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",b,[Object(r["createVNode"])(d,{label:"Web3",icon:e.web3_modal?"pi pi-check":"pi pi-times",style:Object(r["normalizeStyle"])({color:e.web3_modal?"#4CAF50":"#F44336"})},null,8,["icon","style"]),Object(r["createVNode"])(d,{label:"Metamask",icon:e.signature?"pi pi-check":"pi pi-times",style:Object(r["normalizeStyle"])({color:e.signature?"#4CAF50":"#F44336"})},null,8,["icon","style"]),Object(r["createVNode"])(d,{label:"Moda Archives",icon:e.account?"pi pi-check":"pi pi-times",style:Object(r["normalizeStyle"])({color:e.account?"#4CAF50":"#F44336"})},null,8,["icon","style"])]),e.tokens?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",y,Object(r["toDisplayString"])("".concat(e.tokens.length," token").concat(1==e.tokens.length?"":"s"," loaded from OpenSea.")),1)):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(_,{account_id:null===(l=e.account)||void 0===l?void 0:l.id},null,8,["account_id"])],512),[[r["vShow"],!e.store.getters.camera_scan_mode]])],64)}var k=n("1da1"),O=(n("96cf"),n("5502")),j=n("99e5"),g=n.n(j),h=n("5aac"),w=n.n(h),x=n("c030"),C=n("2eaf");function B(){var e,t=Object(r["ref"])(),n=Object(r["ref"])(""),a=Object(r["ref"])(""),o=Object(O["b"])(),c=function(){return console.log("setup v3 modal..."),t.value=new w.a({providerOptions:{walletconnect:{package:C["a"],options:{infuraId:"e132974b42d54791bd631e7bcd88572b"}}},cacheProvider:!0,disableInjectedProvider:!1})},i=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("connecting wallet..."),t.value){e.next=4;break}return alert("Tried to connect wallet but web3 modal not loaded!"),e.abrupt("return");case 4:return t.value.clearCachedProvider(),e.next=7,null===t||void 0===t||null===(n=t.value)||void 0===n?void 0:n.connect().catch((function(e){console.error(e)}));case 7:return r=e.sent,console.log("AFTER CONNECT",r),r.on("accountsChanged",(function(){l(r)})),r.on("chainChanged",(function(){l(r)})),r.on("networkChanged",(function(){l(r)})),e.abrupt("return",l(r));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("setWeb3Account",r),e=new g.a(r),t.next=4,e.eth.getAccounts();case 4:return a=t.sent[0],n.value=a,o.commit("setAddress",a),s(),t.abrupt("return",u());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=new x["a"].providers.Web3Provider(e.currentProvider),r.lookupAddress(n.value).then((function(e){null!=e&&(n.value=e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var r,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=window.localStorage.getItem("web3_signature"),!r){t.next=4;break}return a.value=r,t.abrupt("return");case 4:return o="NFT Viewer - proof of ownership. Please sign this message to prove ownership over your Ethereum account.",c=e.utils.asciiToHex(o),t.next=8,e.eth.personal.sign(c,n.value,"");case 8:a.value=t.sent,window.localStorage.setItem("web3_signature",a.value);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{setupWeb3Modal:c,connectWallet:i,signature:a,address:n,web3_modal:t}}var N=n("5530"),E=(n("d81d"),n("260b")),V=(n("c0b5"),{apiKey:"AIzaSyAdu0sAk8jWlbjGyqHpULmu4E8modXob_8",authDomain:"nft-viewer.firebaseapp.com",projectId:"nft-viewer",storageBucket:"nft-viewer.appspot.com",messagingSenderId:"680051604339",appId:"1:680051604339:web:aa0793be255390e752e306",measurementId:"G-8PLTH0Z68H"}),R=E["a"].initializeApp(V),S=n("d4ec"),D=n("bee2"),T=n("2591"),I=function(){function e(){Object(S["a"])(this,e)}return Object(D["a"])(e,null,[{key:"createBaseEntity",value:function(){var e=T["a"].firestore.Timestamp.now();return{created_at:e,updated_at:e}}},{key:"updateBaseEntity",value:function(){var e=T["a"].firestore.Timestamp.now();return{updated_at:e}}}]),e}(),F=R.firestore(),A=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.collection("account").where("address","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return{id:e.id,entity:e.data()}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.collection("account").add(Object(N["a"])(Object(N["a"])({},I.createBaseEntity()),{},{address:t,signature:n}));case 2:return r=e.sent,e.next=5,r.get();case 5:return a=e.sent,e.abrupt("return",{id:a.id,entity:a.data()});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F.collection("account").doc(t.id).update(t.entity);case 2:return e.next=4,F.collection("account").doc(t.id).get();case 4:return n=e.sent,e.abrupt("return",{id:n.id,entity:n.data()});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=(n("d3b7"),n("4de4"),n("159b"),n("b0c0"),n("a4d3"),n("e01a"),R.firestore()),q=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.opensea.io/api/v1/asset/".concat(t,"/").concat(n,"?include_orders=true"));case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.opensea.io/api/v1/assets/?owner=".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.assets);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z.collection("demo_tokens").get();case 2:return t=e.sent,n=t.docs.map((function(e){return{id:e.id,entity:e.data()}})),e.abrupt("return",n.filter((function(e){return e.entity.token_id&&e.entity.asset_contract_address&&!e.entity.skip})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z.collection("demo_tokens").where("asset_contract_address","==",t).where("token_id","==",n).get();case 2:if(r=e.sent,1==r.docs.length){e.next=5;break}throw"Error - got duplicate token metas";case 5:return a=r.docs[0],e.abrupt("return",{id:a.id,entity:a.data()});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="https://api.opensea.io/api/v1/assets/?",t.forEach((function(e){n+="asset_contract_addresses=".concat(e.entity.asset_contract_address,"&token_ids=").concat(e.entity.token_id,"&")})),n=n.substring(0,n.length-1),e.next=5,fetch(n);case 5:return r=e.sent,e.next=8,r.json();case 8:return a=e.sent,e.abrupt("return",a.assets);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,c,i,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r++)"opensea"==t[r].entity.platform&&n.push(t[r]);return e.next=4,H(n);case 4:for(a=e.sent,o=[],c=0;c<t.length;c++)i=t[c],"opensea"==t[c].entity.platform?(l=a.shift(),l&&o.push(l)):(s=$(i),o.push(s));return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){return{name:e.entity.name,asset_contract:{address:e.entity.asset_contract_address},token_id:e.entity.token_id,description:e.entity.description,creator:{user:{username:e.entity.tag}},image_url:"",animation_url:"",image_thumbnail_url:"",orders:[],permalink:""}};function J(){var e=Object(r["ref"])(!1),t=Object(r["ref"])(),n=Object(r["ref"])(),a=Object(O["b"])(),o=function(){var n=Object(k["a"])(regeneratorRuntime.mark((function n(r,o){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.value=!0,n.next=3,A(r);case 3:if(c=n.sent,!(c.length>0)){n.next=8;break}t.value=c[0],n.next=12;break;case 8:return console.log("creating account since none exist in the database..."),n.next=11,P(r,o);case 11:t.value=n.sent;case 12:a.commit("setAccount",t.value),e.value=!1;case 14:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),c=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:return n.value=e.sent,a.commit("setTokens",n.value),e.next=6,U();case 6:r=e.sent,a.commit("setDemoTokenMetas",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{account:t,loading_account:e,tokens:n,loadAccount:o,loadTokens:c}}var G=function(e){return Object(r["pushScopeId"])("data-v-1f55767c"),e=e(),Object(r["popScopeId"])(),e},K={class:"p-d-flex p-ai-center p-px-3"},X=G((function(){return Object(r["createElementVNode"])("h2",null,"Displays",-1)})),Z=G((function(){return Object(r["createElementVNode"])("div",{style:{"flex-grow":"1"}},null,-1)})),Y={key:0},ee={key:1,class:"p-d-flex p-flex-wrap"},te={key:2};function ne(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("Button"),l=Object(r["resolveComponent"])("DisplayItem"),s=Object(r["resolveComponent"])("EditDisplayDialog"),u=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(u,{class:"controller-card"},{header:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",K,[X,Z,Object(r["createVNode"])(i,{label:"Scan display",icon:"pi pi-camera",disabled:!e.account_id,style:{height:"0%"},onClick:t[0]||(t[0]=function(t){return e.store.commit("setCameraScanMode",!0)})},null,8,["disabled"])])]})),content:Object(r["withCtx"])((function(){return[e.displays_loaded?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ee,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.displays,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:t.id,name:t.entity.name,token_id:t.entity.token_id,asset_contract_address:t.entity.asset_contract_address,onEditDisplay:function(n){return e.editDisplay(t.id)}},null,8,["name","token_id","asset_contract_address","onEditDisplay"])})),128))])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Y,"Connect an account to load your displays")),e.displays_loaded&&0==e.displays.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",te,"No displays found")):Object(r["createCommentVNode"])("",!0),e.account_id?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:3,createDisplay:e.createDisplay,account_id:e.account_id,display_id:e.edit_display_id,"onUpdate:display_id":t[1]||(t[1]=function(t){return e.edit_display_id=t})},null,8,["createDisplay","account_id","display_id"])):Object(r["createCommentVNode"])("",!0)]})),_:1})}var re=R.firestore(),ae=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.collection("display").add(Object(N["a"])(Object(N["a"])({},I.createBaseEntity()),{},{account_id:t,name:n,code:r}));case 2:return a=e.sent,e.next=5,a.get();case 5:return o=e.sent,e.abrupt("return",{id:o.id,entity:o.data()});case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),oe=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.collection("display").add(Object(N["a"])(Object(N["a"])({},I.createBaseEntity()),{},{account_id:t,name:n,code:r}));case 2:o=e.sent,o.onSnapshot((function(e){a({id:e.id,entity:e.data()})}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.collection("display").where("account_id","==",t).onSnapshot((function(e){n(e.docs.map((function(e){return{id:e.id,entity:e.data()}})))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.collection("display").doc(t).get();case 2:return n=e.sent,e.abrupt("return",{id:n.id,entity:n.data()});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:re.collection("display").doc(t).onSnapshot((function(e){n({id:e.id,entity:e.data()})}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.collection("display").doc(t.id).update(t.entity);case 2:return e.next=4,re.collection("display").doc(t.id).get();case 4:return n=e.sent,e.abrupt("return",{id:n.id,entity:n.data()});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re.collection("display").doc(t).update({account_id:n});case 2:return e.next=4,re.collection("display").doc(t).get();case 4:return r=e.sent,e.abrupt("return",{id:r.id,entity:r.data()});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=n("e1bd");function pe(){var e=Object(r["ref"])([]),t=Object(r["ref"])(!1),n=function(){var n=Object(k["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",ce(r,(function(n){e.value=n,t.value=!0})).catch(alert));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),a=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(n,r){var a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(de["a"])("1234567890",6),o=a(),t.next=4,ae(n,r,o).catch(alert);case 4:c=t.sent,c&&e.value.push(c);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{displays:e,displays_loaded:t,loadDisplays:n,createDisplay:a}}var me=function(e){return Object(r["pushScopeId"])("data-v-47c6f7a6"),e=e(),Object(r["popScopeId"])(),e},ve=Object(r["createTextVNode"])("New Display"),fe={class:"p-grid",style:{"flex-wrap":"nowrap"}},be={class:"p-col"},ye={class:"p-float-label",style:{"margin-top":"20px"}},_e=me((function(){return Object(r["createElementVNode"])("label",{for:"name"},"Name",-1)})),ke={class:"p-mt-2",style:{display:"flex","align-items":"center"}},Oe=Object(r["createTextVNode"])(" Plaque dark mode "),je={class:"p-col"},ge={style:{display:"flex","align-items":"center"}};function he(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("InputText"),l=Object(r["resolveComponent"])("Button"),s=Object(r["resolveComponent"])("InputSwitch"),u=Object(r["resolveComponent"])("display-item"),d=Object(r["resolveComponent"])("TokenList"),p=Object(r["resolveComponent"])("TabPanel"),m=Object(r["resolveComponent"])("TabView"),v=Object(r["resolveComponent"])("Dialog");return Object(r["openBlock"])(),Object(r["createBlock"])(v,{header:"Header",visible:null!=e.display_id,modal:!0,"onUpdate:visible":t[10]||(t[10]=function(t){return e.$emit("update:display_id",null)}),style:{width:"100%","max-width":"700px","max-height":"100%"}},{header:Object(r["withCtx"])((function(){return[ve]})),footer:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{label:"Save",onClick:e.handleSave},null,8,["onClick"]),Object(r["createVNode"])(l,{class:"p-button-text",label:"Cancel",onClick:t[9]||(t[9]=function(t){return e.$emit("update:display_id",null)})})]})),default:Object(r["withCtx"])((function(){var n,a,o,c,v,f;return[Object(r["createElementVNode"])("div",fe,[Object(r["createElementVNode"])("div",be,[Object(r["createElementVNode"])("span",ye,[Object(r["createVNode"])(i,{id:"name",modelValue:e.display.entity.name,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.display.entity.name=t}),type:"text",style:{margin:"0 auto","max-width":"150px"}},null,8,["modelValue"]),_e]),Object(r["createVNode"])(l,{class:"p-button-sm p-mt-2",label:"Open in browser",onClick:e.openDisplayInBrowser,style:{display:"block"}},null,8,["onClick"]),Object(r["createElementVNode"])("div",ke,[Object(r["createVNode"])(s,{modelValue:e.display.entity.plaque_dark_mode,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.display.entity.plaque_dark_mode=t}),class:"p-mr-2"},null,8,["modelValue"]),Oe]),Object(r["createVNode"])(l,{class:"p-button-danger p-button-sm p-mt-2",label:"Forget display",onClick:e.forgetDisplay,style:{display:"block"}},null,8,["onClick"])]),Object(r["createElementVNode"])("div",je,[Object(r["createVNode"])(u,{name:e.display.entity.name,token_id:e.display.entity.token_id,asset_contract_address:e.display.entity.asset_contract_address},null,8,["name","token_id","asset_contract_address"]),Object(r["createElementVNode"])("div",ge,[Object(r["createTextVNode"])(Object(r["toDisplayString"])("".concat((null===(n=e.display)||void 0===n||null===(a=n.entity)||void 0===a||null===(o=a.playlist_tokens)||void 0===o?void 0:o.length)||0," token").concat(1==(null===(c=e.display)||void 0===c||null===(v=c.entity)||void 0===v||null===(f=v.playlist_tokens)||void 0===f?void 0:f.length)?"":"s"," in playlist"))+" ",1),Object(r["createVNode"])(l,{onClick:t[2]||(t[2]=function(t){return e.display.entity.playlist_tokens=[]}),icon:"pi pi-times",class:"p-ml-2 p-button-rounded"})])])]),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{header:"Demo tokens"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{selected_token_id:e.display.entity.token_id,"onUpdate:selected_token_id":t[3]||(t[3]=function(t){return e.display.entity.token_id=t}),selected_asset_contract_address:e.display.entity.asset_contract_address,"onUpdate:selected_asset_contract_address":t[4]||(t[4]=function(t){return e.display.entity.asset_contract_address=t}),playlist_tokens:e.display.entity.playlist_tokens,"onUpdate:playlist_tokens":t[5]||(t[5]=function(t){return e.display.entity.playlist_tokens=t})},null,8,["selected_token_id","selected_asset_contract_address","playlist_tokens"])]})),_:1}),Object(r["createVNode"])(p,{header:"My tokens"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{selected_token_id:e.display.entity.token_id,"onUpdate:selected_token_id":t[6]||(t[6]=function(t){return e.display.entity.token_id=t}),selected_asset_contract_address:e.display.entity.asset_contract_address,"onUpdate:selected_asset_contract_address":t[7]||(t[7]=function(t){return e.display.entity.asset_contract_address=t}),playlist_tokens:e.display.entity.playlist_tokens,"onUpdate:playlist_tokens":t[8]||(t[8]=function(t){return e.display.entity.playlist_tokens=t}),user_tokens:!0},null,8,["selected_token_id","selected_asset_contract_address","playlist_tokens"])]})),_:1})]})),_:1})]})),_:1},8,["visible"])}n("caad"),n("2532");var we=["src"],xe={key:1},Ce={class:"p-text-bold"};function Be(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createBlock"])(i,{class:"p-m-2",style:{width:"130px",padding:"0px","text-align":"center"},onClick:t[0]||(t[0]=function(t){return e.$emit("editDisplay")})},{content:Object(r["withCtx"])((function(){return[e.has_image?(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",{key:0,src:e.asset_str,style:{height:"50px"}},null,8,we)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",xe,Object(r["toDisplayString"])(e.asset_str),1))]})),footer:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",Ce,Object(r["toDisplayString"])(e.name),1)]})),_:1})}var Ne=Object(r["defineComponent"])({props:{name:String,asset_contract_address:String,token_id:String},setup:function(e){var t=Object(O["b"])(),n=Object(r["computed"])((function(){return!!t.getters.token(e.token_id)})),a=Object(r["computed"])((function(){var n=t.getters.token(e.token_id);if(n)return n.image_thumbnail_url;var r=t.getters.demo_token_meta(e.asset_contract_address,e.token_id);return r?"".concat(r.entity.name," - ").concat(r.entity.tag):"No token"}));return{asset_str:a,has_image:n}}});n("9575");const Ee=l()(Ne,[["render",Be],["__scopeId","data-v-8892b27c"]]);var Ve=Ee,Re={class:"p-mt-2"},Se={style:{display:"flex","justify-content":"space-between"}};function De(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("Dropdown"),l=Object(r["resolveComponent"])("Paginator"),s=Object(r["resolveComponent"])("TokenItem");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Re,[Object(r["createElementVNode"])("div",Se,[e.user_tokens?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,modelValue:e.tag_filter,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.tag_filter=t}),options:e.tag_filter_options,optionLabel:"name"},null,8,["modelValue","options"])),Object(r["createVNode"])(l,{first:e.offset,"onUpdate:first":t[1]||(t[1]=function(t){return e.offset=t}),rows:e.limit,pageLinkSize:3,totalRecords:e.total_records,alwaysShow:!1,class:"p-p-0"},{FirstPageLink:Object(r["withCtx"])((function(){return[]})),_:1},8,["first","rows","totalRecords"])]),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.page_tokens,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:t.name,token:t,selected:t.asset_contract.address==e.selected_asset_contract_address&&t.token_id==e.selected_token_id,in_playlist:e.playlist_tokens.some((function(e){return e.asset_contract_address==t.asset_contract.address&&e.token_id==t.token_id})),onClick:function(n){return e.selectToken(t.asset_contract.address,t.token_id)},onTogglePlaylistToken:function(n){return e.togglePlaylistToken(t,n)}},null,8,["token","selected","in_playlist","onClick","onTogglePlaylistToken"])})),128))])}var Te=n("2909"),Ie=(n("4ec9"),n("3ca3"),n("ddb0"),n("a630"),n("4e82"),n("fb6a"),{class:"p-grid"}),Fe={class:"p-col-6",style:{margin:"auto","text-align":"left","padding-left":"20px"}},Ae={class:"p-col-4"},Pe=Object(r["createTextVNode"])("Local only"),Me=["src"],ze={class:"p-col-2",style:{margin:"auto"}};function qe(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("Button"),l=Object(r["resolveComponent"])("Card");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(l,{style:Object(r["normalizeStyle"])(e.selected?"border-style: solid; -webkit-box-sizing: border-box;":"")},{content:Object(r["withCtx"])((function(){var n,a,o,c,l,s,u;return[Object(r["createElementVNode"])("div",Ie,[Object(r["createElementVNode"])("div",Fe,[Object(r["createElementVNode"])("div",null,Object(r["toDisplayString"])(null===(n=e.token)||void 0===n?void 0:n.name),1),Object(r["createElementVNode"])("div",null,Object(r["toDisplayString"])(null===(a=e.token_meta)||void 0===a||null===(o=a.entity)||void 0===o?void 0:o.tag),1)]),Object(r["createElementVNode"])("div",Ae,[null!==(c=e.token_meta)&&void 0!==c&&c.entity&&"opensea"!=(null===(l=e.token_meta)||void 0===l||null===(s=l.entity)||void 0===s?void 0:s.platform)?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Pe],64)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("img",{key:1,src:null===(u=e.token)||void 0===u?void 0:u.image_thumbnail_url,style:{height:"50px"}},null,8,Me))]),Object(r["createElementVNode"])("div",ze,[e.in_playlist?(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:0,class:"p-button-text",icon:"pi pi-list",style:{color:"#000000"},onClick:t[0]||(t[0]=Object(r["withModifiers"])((function(t){return e.$emit("togglePlaylistToken",!1)}),["stop"]))})):(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:1,class:"p-button-text",icon:"pi pi-plus",onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(t){return e.$emit("togglePlaylistToken",!0)}),["stop"]))}))])])]})),_:1},8,["style"])])}var Le=Object(r["defineComponent"])({props:{token:Object,selected:Boolean,in_playlist:Boolean},setup:function(e){var t=Object(O["b"])(),n=Object(r["computed"])((function(){var n,r;return t.getters.demo_token_meta(null===(n=e.token)||void 0===n?void 0:n.asset_contract.address,null===(r=e.token)||void 0===r?void 0:r.token_id)}));return{token_meta:n}}});n("ca1b");const Ue=l()(Le,[["render",qe],["__scopeId","data-v-37fbbc14"]]);var We=Ue,He=Object(r["defineComponent"])({components:{TokenItem:We},props:{selected_token_id:String,selected_asset_contract_address:String,playlist_tokens:{type:Array,default:function(){return[]}},user_tokens:Boolean},setup:function(e,t){var n=t.emit,a=Object(O["b"])(),o=Object(r["ref"])([]),c=10,i=Object(r["ref"])(0),l=Object(r["ref"])({name:"All",value:"All"}),s=Object(r["computed"])((function(){var t=a.getters.demo_token_metas;return e.user_tokens||"All"==l.value.value||(t=t.filter((function(e){return e.entity.tag==l.value.value}))),t})),u=Object(r["computed"])((function(){var e=new Map;a.getters.demo_token_metas.forEach((function(t){t.entity.tag&&e.set(t.entity.tag,!0)}));var t=Array.from(e.keys()).map((function(e){return{name:e,value:e}}));return t.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})),[{name:"All",value:"All"}].concat(Object(Te["a"])(t))})),d=Object(r["computed"])((function(){var e=s.value.slice(i.value,c+i.value);return e})),p=Object(r["computed"])((function(){var e=a.getters.tokens.slice(i.value,c+i.value);return e})),m=Object(r["computed"])((function(){return e.user_tokens?p.value:o.value})),v=Object(r["computed"])((function(){return e.user_tokens?a.getters.tokens.length:s.value.length}));Object(r["watch"])(d,function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("PAGE TOKEN METAS",t),e.next=3,Q(t);case 3:o.value=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{immediate:!0,deep:!0});var f=function(t,r){t==e.selected_asset_contract_address&&r==e.selected_token_id?(n("update:selected_token_id",""),n("update:selected_asset_contract_address","")):(n("update:selected_token_id",r),n("update:selected_asset_contract_address",t))},b=function(t,r){var a=[];e.playlist_tokens&&(a=JSON.parse(JSON.stringify(e.playlist_tokens))),r?a.push({token_id:t.token_id,asset_contract_address:t.asset_contract.address}):a=a.filter((function(e){return e.token_id!=t.token_id&&e.asset_contract_address!=t.asset_contract.address})),n("update:playlist_tokens",a)};return{selectToken:f,store:a,togglePlaylistToken:b,page_tokens:m,total_records:v,limit:c,offset:i,user_page_tokens:p,tag_filter:l,tag_filter_options:u}}});const Qe=l()(He,[["render",De]]);var $e=Qe,Je=Object(r["defineComponent"])({components:{DisplayItem:Ve,TokenList:$e},props:{createDisplay:{type:Function,required:!0},display_id:{type:String,required:!1}},setup:function(e,t){var n=t.emit,a=Object(r["ref"])({id:"",entity:{name:""}}),o=Object(O["b"])(),c=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,se(a.value);case 2:n("update:display_id",null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.value.entity.account_id="",a.value.entity.token_id="",a.value.entity.asset_contract_address="",e.next=5,se(a.value);case 5:n("update:display_id",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=o.getters.account,!e.display_id||r.entity.saved_display_ids.includes(e.display_id)){t.next=5;break}return r.entity.saved_display_ids.push(e.display_id),t.next=5,M(r);case 5:return a.value.entity.account_id="",a.value.entity.token_id="",a.value.entity.asset_contract_address="",t.next=10,se(a.value);case 10:n("update:display_id",null);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.open("".concat(window.location.origin).concat(window.location.pathname,"/#/display?display_id=").concat(e.display_id));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r["watch"])(e,(function(){e.display_id?ie(e.display_id).then((function(e){a.value=e})):a.value={id:"",entity:{name:""}}}),{immediate:!0}),{handleSave:c,forgetDisplay:i,shareAndRemember:l,display:a,openDisplayInBrowser:s}}});n("05e3");const Ge=l()(Je,[["render",he],["__scopeId","data-v-47c6f7a6"]]);var Ke=Ge,Xe=Object(r["defineComponent"])({props:{account_id:String},components:{EditDisplayDialog:Ke,DisplayItem:Ve},setup:function(e){var t=Object(O["b"])(),n=Object(r["ref"])(null),a=pe(),o=a.displays,c=a.displays_loaded,i=a.loadDisplays,l=a.createDisplay;Object(r["watch"])((function(){return e.account_id}),function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,i(t);case 3:e.next=6;break;case 5:alert("Tried to load displays but had no account");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var s=function(e){n.value=e};return{createDisplay:l,displays:o,displays_loaded:c,editDisplay:s,edit_display_id:n,store:t}}});n("76b3");const Ze=l()(Xe,[["render",ne],["__scopeId","data-v-1f55767c"]]);var Ye=Ze,et={style:{"text-align":"right","background-color":"#000000",width:"100%",height:"100%",position:"fixed"}};function tt(e,t,n,a,o,c){var i=Object(r["resolveComponent"])("Button"),l=Object(r["resolveComponent"])("loading"),s=Object(r["resolveComponent"])("qrcode-stream");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",et,[Object(r["createVNode"])(i,{label:"Cancel scanning",icon:"pi pi-ban",class:"p-m-3",onClick:t[0]||(t[0]=function(t){return e.store.commit("setCameraScanMode",!1)})}),Object(r["createVNode"])(l,{active:e.camera_loading,opacity:0,color:"#FFFFFF"},null,8,["active"]),Object(r["createElementVNode"])("div",null,[Object(r["createVNode"])(s,{style:{width:"100%"},onDecode:e.onDecode,onInit:e.onInit},null,8,["onDecode","onInit"])])])}var nt=n("bb6f"),rt=n("9062"),at=n.n(rt),ot=Object(r["defineComponent"])({components:{QrcodeStream:nt["QrcodeStream"],Loading:at.a},props:{account_id:String},setup:function(e){var t=Object(O["b"])(),n=Object(r["ref"])(!1),a=function(){var n=Object(k["a"])(regeneratorRuntime.mark((function n(r){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=r.indexOf("display_id="),!(a>-1)){n.next=5;break}return o=r.slice(a+11),n.next=5,ue(o,e.account_id||"");case 5:t.commit("setCameraScanMode",!1);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),o=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value=!0,e.prev=1,e.next=4,t;case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),"NotAllowedError"===e.t0.name||"NotFoundError"===e.t0.name||"NotSupportedError"===e.t0.name||"NotReadableError"===e.t0.name||"OverconstrainedError"===e.t0.name||e.t0.name;case 9:return e.prev=9,n.value=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}();return{store:t,onDecode:a,onInit:o,camera_loading:n}}});const ct=l()(ot,[["render",tt]]);var it=ct,lt=Object(r["defineComponent"])({components:{DisplayController:Ye,QrScan:it},props:{display_id:String},setup:function(e){var t=Object(O["b"])(),n=Object(r["ref"])(!1),a=B(),o=a.connectWallet,c=a.setupWeb3Modal,i=a.signature,l=a.address,s=a.web3_modal,u=J(),d=u.account,p=u.tokens,m=u.loadAccount,v=u.loadTokens,f=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.value=!0,t.next=3,c();case 3:return t.next=5,o();case 5:return t.next=7,m(l.value,i.value);case 7:if(!e.display_id){t.next=14;break}return t.next=10,ie(e.display_id);case 10:return a=t.sent,a.entity.account_id=(null===(r=d.value)||void 0===r?void 0:r.id)||"",t.next=14,se(a);case 14:return t.next=16,v(l.value);case 16:n.value=!1;case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return f(),{connectAccount:f,account:d,web3_modal:s,signature:i,loading_account:n,tokens:p,store:t}}});n("0455");const st=l()(lt,[["render",_],["__scopeId","data-v-8498177e"]]);var ut=st,dt=function(e){return Object(r["pushScopeId"])("data-v-299eb34d"),e=e(),Object(r["popScopeId"])(),e},pt={key:0,class:"video-container"},mt=["loop","src"],vt={key:0,class:"center",style:{"font-size":"40px"}},ft={key:1,class:"center",style:{"font-size":"40px"}},bt=dt((function(){return Object(r["createElementVNode"])("div",{style:{"margin-top":"40px"}},"Scan to cast NFTs",-1)}));function yt(e,t,n,a,o,c){var i,l,s=Object(r["resolveComponent"])("loading"),u=Object(r["resolveComponent"])("qrcode-vue");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[e.loading?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,active:!0})):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[e.token?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[e.media_is_video?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",pt,[Object(r["createElementVNode"])("video",{class:Object(r["normalizeClass"])([e.show_video?"show-opacity":"hide-opacity","center"]),ref:"player",autoplay:"",muted:"",loop:e.video_should_loop,src:e.media_url},null,10,mt)])):Object(r["createCommentVNode"])("",!0)],64)):Object(r["createCommentVNode"])("",!0),e.loading||e.token?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[null!==(i=e.display)&&void 0!==i&&null!==(l=i.entity)&&void 0!==l&&l.account_id?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",vt,"Connected - No token selected")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ft,[Object(r["createVNode"])(u,{value:e.display_controller_url,size:300,level:"H"},null,8,["value"]),bt]))],64))],64))])}n("8a79"),n("c740");var _t="http://localhost:8081/media/",kt=function(e){return"".concat(_t).concat(e)},Ot=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[".mp4",".jpg"],r=0,a=n;case 2:if(!(r<a.length)){e.next=18;break}return o=a[r],e.prev=4,c=t+o,e.next=8,fetch(kt(c));case 8:if(i=e.sent,!(i.status<400)){e.next=11;break}return e.abrupt("return",c);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](4);case 15:r++,e.next=2;break;case 18:return e.abrupt("return","");case 19:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),jt=n("d39c"),gt=n.n(jt),ht=(n("e40d"),n("c71c"));ht["b"].setDefaults({zIndex:2021});var wt=Object(r["defineComponent"])({props:{display_id:String},components:{QrcodeVue:gt.a,Loading:at.a},setup:function(e){var t=Object(d["c"])(),n=Object(r["ref"])(),a=Object(r["ref"])(),o=Object(r["ref"])(),c=Object(r["ref"])(!0),i=Object(r["ref"])(!1),l=Object(r["ref"])(),s=Object(r["ref"])(),u=Object(r["ref"])(),p=Object(r["ref"])(),m=Object(r["computed"])((function(){var e,t,n=!(null===(e=a.value)||void 0===e||!e.animation_url)&&!a.value.animation_url.endsWith(".wav"),r=!(null===o||void 0===o||!o.value)&&!(null===(t=s.value)||void 0===t||!t.endsWith(".mp4"));return n||r})),v=Object(r["computed"])((function(){return n.value?"https://jkurtz678.github.io/nft-viewer/".concat(document.location.pathname,"#/controller?display_id=").concat(n.value.id):""})),f=Object(r["computed"])((function(){var e,t;return s.value&&null!==(e=a.value)&&void 0!==e&&e.token_id?kt(s.value):m.value&&a.value?a.value.animation_url:null!==(t=a.value)&&void 0!==t&&t.image_url?a.value.image_url:null})),b=Object(r["computed"])((function(){var e,t,r=null===(e=n.value)||void 0===e||null===(t=e.entity)||void 0===t?void 0:t.playlist_tokens;return null==r||0==r.length||null!=p.value}));Object(r["watch"])(u,(function(e){}));var y=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("initDisplay",r),i.value=!1,window.localStorage.setItem("nft_video_loaded","false"),p.value&&clearTimeout(p.value),e.next=6,new Promise((function(e){return setTimeout(e,800)}));case 6:if(t.push({path:"/display",query:{display_id:r.id}}),n.value=r,window.localStorage.setItem("nft_display_id",r.id),r.entity.token_id&&r.entity.asset_contract_address){e.next=15;break}return a.value=null,s.value="",l.value&&l.value.hide(),c.value=!1,e.abrupt("return");case 15:_(r.entity.asset_contract_address,r.entity.token_id);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t,n);case 3:o.value=e.sent,console.log("loadDemoTokenMeta",o.value),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log("No token meta found"),o.value=null;case 11:if(o.value&&"opensea"!=o.value.entity.platform){e.next=17;break}return e.next=14,q(t,n);case 14:r=e.sent,e.next=18;break;case 17:r=$(o.value);case 18:return a.value=r,console.log("tokenValue",a.value),e.prev=20,e.next=23,Ot(a.value.token_id);case 23:s.value=e.sent,e.next=30;break;case 26:e.prev=26,e.t1=e["catch"](20),s.value="",console.log(e.t1);case 30:m.value?(l.value&&l.value.hide(),O()):f.value&&(j(f.value),p.value=setTimeout((function(){g()}),45e3)),c.value=!1;case 32:case"end":return e.stop()}}),e,null,[[0,7],[20,26]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=50,t=0,n=setInterval(r,e);function r(){var e,r;u.value?(t=u.value.currentTime,t>0&&(clearInterval(n),i.value=!0,window.localStorage.setItem("nft_video_loaded","true"),null===(e=u.value)||void 0===e||e.removeEventListener("ended",g),console.log("video duration: ",u.value.duration),u.value.duration&&u.value.duration<15?p.value=setTimeout((function(){g()}),45e3):null===(r=u.value)||void 0===r||r.addEventListener("ended",g))):console.log("ERROR: Display video player not found.")}},j=function(e){console.log("displayImage",e),l.value=Object(ht["a"])({images:[e],options:{inline:!1,button:!1,navbar:!1,title:!1,toolbar:!1,tooltip:!1,movable:!1,zoomable:!1,rotatable:!1,scalable:!0,transition:!0,fullscreen:!0,keyboard:!1}}),window.localStorage.setItem("nft_video_loaded","true")},g=function(){var e,t,r;if(console.log("nextPlaylistToken"),null!==(e=n.value)&&void 0!==e&&null!==(t=e.entity)&&void 0!==t&&null!==(r=t.playlist_tokens)&&void 0!==r&&r.length){var o=n.value.entity.playlist_tokens.findIndex((function(e){var t;return e.token_id==(null===(t=a.value)||void 0===t?void 0:t.token_id)}))+1;(-1==o||o>=n.value.entity.playlist_tokens.length)&&(o=0),n.value.entity.token_id=n.value.entity.playlist_tokens[o].token_id,n.value.entity.asset_contract_address=n.value.entity.playlist_tokens[o].asset_contract_address,se(n.value)}};if(e.display_id)le(e.display_id,y);else{var h=localStorage.getItem("nft_display_id");h?le(h,y):oe("","","",y)}return{display:n,loading:c,show_video:i,display_controller_url:v,token:a,media_url:f,player:u,video_should_loop:b,local_file:s,media_is_video:m}}});n("c938");const xt=l()(wt,[["render",yt],["__scopeId","data-v-299eb34d"]]);var Ct=xt,Bt={key:0,class:"center",style:{"font-size":"40px"}},Nt={key:1,class:"center",style:{"font-size":"40px"}},Et={key:2,class:"center p-px-6",style:{"text-align":"left",width:"100%"}},Vt={style:{"max-width":"800px","margin-left":"auto","margin-right":"auto"}},Rt={style:{"font-size":"40px"}},St={class:"p-grid"},Dt={class:"p-col",style:{"min-width":"350px"}},Tt={style:{"margin-bottom":"8px"}},It={key:0,style:{"margin-bottom":"8px"}},Ft={class:"p-col",style:{"text-align":"center"}},At={style:{"font-size":"20px"}},Pt=Object(r["createTextVNode"])("View on OpenSea"),Mt=Object(r["createTextVNode"])("View online");function zt(e,t,n,a,o,c){var i,l,s,u,d,p,m=Object(r["resolveComponent"])("loading"),v=Object(r["resolveComponent"])("qrcode-vue");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{style:Object(r["normalizeStyle"])([{width:"100%",height:"100%",position:"fixed"},e.dark_mode?"background-color: #000000; color: #FFFFFF":null])},[e.loading?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,active:""})):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:1,style:{transition:"opacity ease-in 0.8s"},class:Object(r["normalizeClass"])(e.show_text?"show-opacity":"hide-opacity")},[e.display?e.display&&!e.display.entity.token_id?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Nt,"No media loaded")):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Et,[Object(r["createElementVNode"])("div",Vt,[Object(r["createElementVNode"])("div",Rt,Object(r["toDisplayString"])(null===(i=e.token)||void 0===i?void 0:i.name),1),Object(r["createElementVNode"])("div",St,[Object(r["createElementVNode"])("div",Dt,[Object(r["createElementVNode"])("div",Tt,Object(r["toDisplayString"])(null===(l=e.token)||void 0===l||null===(s=l.creator)||void 0===s||null===(u=s.user)||void 0===u?void 0:u.username),1),e.top_bid?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",It,Object(r["toDisplayString"])(e.top_bid),1)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("div",null,Object(r["toDisplayString"])(null===(d=e.token)||void 0===d?void 0:d.description),1)]),Object(r["createElementVNode"])("div",Ft,[Object(r["createVNode"])(v,{value:null===(p=e.token)||void 0===p?void 0:p.permalink,size:200,level:"M"},null,8,["value"]),Object(r["createElementVNode"])("div",At,[e.token_meta&&"opensea"!=e.token_meta.entity.platform?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Mt],64)):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Pt],64))])])])])])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Bt,"No display found"))],2))],4)}n("b680");var qt=Object(r["defineComponent"])({props:{display_id:String},components:{QrcodeVue:gt.a,Loading:at.a},setup:function(){var e=Object(r["ref"])(),t=Object(r["ref"])(),n=Object(r["ref"])(),a=Object(r["ref"])(!1),o=Object(r["ref"])(window.localStorage.getItem("nft_display_id")),c=Object(r["ref"])(!1);Object(r["onMounted"])((function(){o.value&&(c.value=!0)}));var i=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c.value=!1,t.next=3,new Promise((function(e){return setTimeout(e,800)}));case 3:if(e.value=n,!n.entity.token_id||!n.entity.asset_contract_address){t.next=7;break}return t.next=7,l(n.entity.asset_contract_address,n.entity.token_id);case 7:a.value=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(r,a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(r,a);case 3:n.value=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log("No token meta found"),n.value=null;case 10:if(n.value&&"opensea"!=n.value.entity.platform){e.next=16;break}return e.next=13,q(r,a);case 13:o=e.sent,e.next=17;break;case 16:o=$(n.value);case 17:t.value=o;case 18:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),s=Object(r["computed"])((function(){var t;return null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.entity.plaque_dark_mode})),u=Object(r["computed"])((function(){var e,n=null===t||void 0===t||null===(e=t.value)||void 0===e?void 0:e.orders;if(null==n||0==(null===n||void 0===n?void 0:n.length))return"";var r=n[0];n.forEach((function(e){e.base_price>r.base_price&&(r=e)}));var a=r.base_price/Math.pow(10,r.payment_token_contract.decimals);return"Top bid: ".concat(a.toFixed(3)," ").concat(r.payment_token_contract.symbol)}));return Object(r["watch"])((function(){return o.value}),Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.value=!0,o.value?le(o.value,i):(e.value=null,a.value=!1);case 2:case"end":return t.stop()}}),t)}))),{immediate:!0}),window.addEventListener("storage",(function(){o.value=window.localStorage.getItem("nft_display_id"),c.value="true"==window.localStorage.getItem("nft_video_loaded")})),{loading:a,token:t,display:e,dark_mode:s,show_text:c,top_bid:u,token_meta:n}}});n("5e6d");const Lt=l()(qt,[["render",zt],["__scopeId","data-v-232405ed"]]);var Ut=Lt,Wt=[{path:"/controller",name:"Controller",component:ut,props:function(e){return{display_id:e.query.display_id}}},{path:"/display",name:"Display",component:Ct,props:function(e){return{display_id:e.query.display_id}}},{path:"/plaque",name:"Plaque",component:Ut},{path:"/",redirect:"/controller"}],Ht=Object(d["a"])({history:Object(d["b"])(),routes:Wt}),Qt=Ht,$t=n("9319"),Jt=n("bb57"),Gt=n("9899"),Kt=n("5bd2"),Xt=n("8398"),Zt=n("a1e6"),Yt=n("f4ad"),en=n("eeae"),tn=n("c982"),nn=n("0100"),rn=n("c1e1"),an=(n("7db0"),Object(O["a"])({state:{address:"",account:{},tokens:[],demo_tokens:[],demo_token_metas:[],camera_scan_mode:!1},getters:{address:function(e){return e.address},account:function(e){return e.account},demo_token_metas:function(e){return e.demo_token_metas},demo_token_meta:function(e){return function(t,n){return e.demo_token_metas.find((function(e){return e.entity.asset_contract_address==t&&e.entity.token_id==n}))}},tokens:function(e){return e.tokens},token:function(e){return function(t){var n=e.tokens.find((function(e){return e.token_id===t}));return n||e.demo_tokens.find((function(e){return e.token_id===t}))}},demo_tokens:function(e){return e.demo_tokens},camera_scan_mode:function(e){return e.camera_scan_mode}},mutations:{setAddress:function(e,t){e.address=t},setAccount:function(e,t){e.account=t},setTokens:function(e,t){e.tokens=t},setDemoTokens:function(e,t){e.demo_tokens=t},setDemoTokenMetas:function(e,t){e.demo_token_metas=t},setCameraScanMode:function(e,t){e.camera_scan_mode=t}}})),on=an,cn=(n("ec125"),n("e1ae"),n("4121"),n("bddf"),n("0808"),Object(r["createApp"])(u));cn.use(on),cn.use(Qt),cn.use($t["a"]),cn.use(ht["b"]),cn.component("Button",Jt["a"]),cn.component("Dropdown",nn["a"]),cn.component("TabPanel",tn["a"]),cn.component("TabView",en["a"]),cn.component("InputSwitch",Yt["a"]),cn.component("Card",Gt["a"]),cn.component("Dialog",Kt["a"]),cn.component("InputText",Xt["a"]),cn.component("Chip",Zt["a"]),cn.component("Paginator",rn["a"]),cn.mount("#app")},d3cc:function(e,t,n){},f0c8:function(e,t,n){}});
//# sourceMappingURL=app.eb74a73b.js.map